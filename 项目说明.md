# é‡‘èåˆ†æé¡¹ç›®è¯´æ˜æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåŸºäºAIçš„é‡‘èåˆ†æç³»ç»Ÿï¼Œç”±ä¸¤ä¸ªæ ¸å¿ƒå­é¡¹ç›®ç»„æˆï¼š
1. **Financial-MCP-Agent** - å¤šæ™ºèƒ½ä½“é‡‘èåˆ†æç³»ç»Ÿ
2. **a-share-mcp-is-just-i-need** - Aè‚¡æ•°æ®æœåŠ¡MCPæœåŠ¡å™¨

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
Finance/
â”œâ”€â”€ Financial-MCP-Agent/          # ä¸»åˆ†æç³»ç»Ÿï¼ˆæ¶ˆè´¹è€…ï¼‰
â”œâ”€â”€ a-share-mcp-is-just-i-need/   # æ•°æ®æœåŠ¡ï¼ˆæä¾›è€…ï¼‰
â”œâ”€â”€ data_process.py               # æ•°æ®é¢„å¤„ç†å·¥å…·ï¼ˆæ–°é—»å»é‡ï¼‰
â”œâ”€â”€ train_qwen_sentiment.py      # æƒ…æ„Ÿåˆ†ææ¨¡å‹è®­ç»ƒ
â”œâ”€â”€ train_qwen_risk.py           # é£é™©è¯„ä¼°æ¨¡å‹è®­ç»ƒ
â””â”€â”€ requirements.txt             # é¡¹ç›®ä¾èµ–
```

**å…³ç³»è¯´æ˜**ï¼š
- `Financial-MCP-Agent` é€šè¿‡ MCPï¼ˆModel Context Protocolï¼‰åè®®è°ƒç”¨ `a-share-mcp-is-just-i-need` æä¾›çš„æ•°æ®æœåŠ¡
- ä¸¤è€…é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆstdioï¼‰è¿›è¡Œé€šä¿¡

---

## ğŸ“¦ å­é¡¹ç›®ä¸€ï¼šFinancial-MCP-Agent

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
ä¸€ä¸ªåŸºäºLangGraphçš„å¤šæ™ºèƒ½ä½“å¹¶è¡Œåˆ†æç³»ç»Ÿï¼Œèƒ½å¤Ÿå¯¹Aè‚¡è‚¡ç¥¨è¿›è¡Œå…¨é¢åˆ†æã€‚

### ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

#### 1. **å·¥ä½œæµè®¾è®¡**ï¼ˆLangGraphï¼‰
```
start_node (èµ·ç‚¹)
    â†“ (å¹¶è¡Œåˆ†æ”¯)
    â”œâ”€â”€ fundamental_analyst  (åŸºæœ¬é¢åˆ†ææ™ºèƒ½ä½“)
    â”œâ”€â”€ technical_analyst    (æŠ€æœ¯åˆ†ææ™ºèƒ½ä½“)
    â”œâ”€â”€ value_analyst        (ä¼°å€¼åˆ†ææ™ºèƒ½ä½“)
    â””â”€â”€ news_analyst         (æ–°é—»åˆ†ææ™ºèƒ½ä½“)
    â†“ (æ±‡èš)
    â””â”€â”€ summarizer          (æ€»ç»“æ™ºèƒ½ä½“)
    â†“
END
```

**ç‰¹ç‚¹**ï¼š
- å››ä¸ªåˆ†ææ™ºèƒ½ä½“å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡
- æ‰€æœ‰ç»“æœæ±‡æ€»åˆ°æ€»ç»“æ™ºèƒ½ä½“ï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š

#### 2. **æ ¸å¿ƒç»„ä»¶**

##### ğŸ“ ç›®å½•ç»“æ„
```
Financial-MCP-Agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py                    # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ agents/                    # æ™ºèƒ½ä½“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ fundamental_agent.py  # åŸºæœ¬é¢åˆ†æ
â”‚   â”‚   â”œâ”€â”€ technical_agent.py    # æŠ€æœ¯åˆ†æ
â”‚   â”‚   â”œâ”€â”€ value_agent.py        # ä¼°å€¼åˆ†æ
â”‚   â”‚   â”œâ”€â”€ news_agent.py         # æ–°é—»åˆ†æ
â”‚   â”‚   â””â”€â”€ summary_agent.py      # æ€»ç»“æŠ¥å‘Šç”Ÿæˆ
â”‚   â”œâ”€â”€ tools/                     # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mcp_client.py         # MCPå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ mcp_config.py         # MCPæœåŠ¡å™¨é…ç½®
â”‚   â””â”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ state_definition.py   # çŠ¶æ€å®šä¹‰
â”‚       â”œâ”€â”€ logging_config.py     # æ—¥å¿—é…ç½®
â”‚       â””â”€â”€ execution_logger.py  # æ‰§è¡Œæ—¥å¿—
â”œâ”€â”€ reports/                       # ç”Ÿæˆçš„æŠ¥å‘Š
â””â”€â”€ logs/                         # æ‰§è¡Œæ—¥å¿—
```

##### ğŸ¤– æ™ºèƒ½ä½“è¯¦è§£

**1. Fundamental Agentï¼ˆåŸºæœ¬é¢åˆ†ææ™ºèƒ½ä½“ï¼‰**
- **æŠ€æœ¯æ ˆ**ï¼šReAct Agentæ¡†æ¶
- **åŠŸèƒ½**ï¼šåˆ†æå…¬å¸çš„è´¢åŠ¡çŠ¶å†µã€ç›ˆåˆ©èƒ½åŠ›ã€è¡Œä¸šåœ°ä½
- **æ•°æ®æ¥æº**ï¼šé€šè¿‡MCPè°ƒç”¨è´¢åŠ¡æŠ¥å‘Šå·¥å…·
- **åˆ†ææ–¹æ³•**ï¼šä½¿ç”¨LLMè¿›è¡Œæ·±åº¦åˆ†æ

**2. Technical Agentï¼ˆæŠ€æœ¯åˆ†ææ™ºèƒ½ä½“ï¼‰**
- **åŠŸèƒ½**ï¼šåˆ†æä»·æ ¼è¶‹åŠ¿ã€äº¤æ˜“é‡ã€æŠ€æœ¯æŒ‡æ ‡
- **æ•°æ®æ¥æº**ï¼šé€šè¿‡MCPè·å–å†å²Kçº¿æ•°æ®
- **åˆ†ææŒ‡æ ‡**ï¼šç§»åŠ¨å¹³å‡çº¿ã€æˆäº¤é‡ã€ä»·æ ¼èµ°åŠ¿ç­‰

**3. Value Agentï¼ˆä¼°å€¼åˆ†ææ™ºèƒ½ä½“ï¼‰**
- **åŠŸèƒ½**ï¼šè¯„ä¼°è‚¡ç¥¨çš„ä¼°å€¼æ°´å¹³
- **åˆ†ææŒ‡æ ‡**ï¼šå¸‚ç›ˆç‡ï¼ˆPEï¼‰ã€å¸‚å‡€ç‡ï¼ˆPBï¼‰ã€å¸‚é”€ç‡ï¼ˆPSï¼‰ç­‰
- **åˆ¤æ–­æ ‡å‡†**ï¼šä¸è¡Œä¸šå¹³å‡æ°´å¹³å’Œå†å²æ°´å¹³å¯¹æ¯”

**4. News Agentï¼ˆæ–°é—»åˆ†ææ™ºèƒ½ä½“ï¼‰**
- **åŠŸèƒ½**ï¼šåˆ†ææ–°é—»æƒ…æ„Ÿå’ŒæŠ•èµ„é£é™©
- **æ•°æ®æ¥æº**ï¼šæ–°é—»çˆ¬è™«å·¥å…·
- **åˆ†ææ–¹æ³•**ï¼šæƒ…æ„Ÿåˆ†æã€é£é™©è¯†åˆ«

**5. Summary Agentï¼ˆæ€»ç»“æ™ºèƒ½ä½“ï¼‰**
- **åŠŸèƒ½**ï¼šæ•´åˆæ‰€æœ‰åˆ†æç»“æœï¼Œç”Ÿæˆç»¼åˆæŠ¥å‘Š
- **è¾“å‡ºæ ¼å¼**ï¼šMarkdownæ ¼å¼çš„åˆ†ææŠ¥å‘Š

#### 3. **å…³é”®æŠ€æœ¯ç‰¹æ€§**

##### ğŸŒ MCPåè®®é›†æˆ
- ä½¿ç”¨ `langchain-mcp-adapters` è¿æ¥æ•°æ®æœåŠ¡
- é€šè¿‡stdioä¸MCPæœåŠ¡å™¨é€šä¿¡
- é…ç½®æ–‡ä»¶ï¼š`src/tools/mcp_config.py`

##### ğŸ”„ çŠ¶æ€ç®¡ç†
```python
class AgentState(TypedDict):
    messages: Annotated[Sequence[BaseMessage], operator.add]
    data: Annotated[Dict[str, Any], merge_dicts]
    metadata: Annotated[Dict[str, Any], merge_dicts]
```
- ä½¿ç”¨TypedDictå®šä¹‰çŠ¶æ€ç»“æ„
- æ”¯æŒæ¶ˆæ¯åˆ—è¡¨ã€æ•°æ®å­—å…¸ã€å…ƒæ•°æ®çš„åˆå¹¶

##### ğŸ“ è‡ªç„¶è¯­è¨€å¤„ç†
- æ”¯æŒå¤šç§è¾“å…¥æ ¼å¼ï¼š
  - "åˆ†æå˜‰å‹å›½é™…"
  - "åˆ†æå˜‰å‹å›½é™…(603871)"
  - "603871 è¿™ä¸ªè‚¡ç¥¨å€¼å¾—ä¹°å—"
  - "å¸®æˆ‘çœ‹çœ‹æ¯”äºšè¿ªè¿™åªè‚¡ç¥¨æ€ä¹ˆæ ·"
- è‡ªåŠ¨æå–è‚¡ç¥¨ä»£ç å’Œå…¬å¸åç§°

##### ğŸ“Š æ—¥å¿—ç³»ç»Ÿ
- å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—è®°å½•
- æ¯æ¬¡è¿è¡Œç”Ÿæˆç‹¬ç«‹æ—¥å¿—ç›®å½•
- è®°å½•æ‰€æœ‰æ™ºèƒ½ä½“çš„æ‰§è¡Œè¿‡ç¨‹

#### 4. **ä½¿ç”¨æ–¹å¼**

**å‘½ä»¤è¡Œæ–¹å¼**ï¼š
```bash
cd Financial-MCP-Agent
python -m src.main --command "åˆ†æè´µå·èŒ…å°"
```

**äº¤äº’å¼æ–¹å¼**ï¼š
```bash
python -m src.main
# ç„¶åè¾“å…¥æŸ¥è¯¢ï¼Œå¦‚ï¼šåˆ†æå˜‰å‹å›½é™…(603871)
```

**è¾“å‡º**ï¼š
- æ§åˆ¶å°æ˜¾ç¤ºåˆ†æè¿›åº¦
- ç”ŸæˆMarkdownæ ¼å¼æŠ¥å‘Šåˆ° `reports/` ç›®å½•
- ä¿å­˜è¯¦ç»†æ—¥å¿—åˆ° `logs/` ç›®å½•

---

## ğŸ“¦ å­é¡¹ç›®äºŒï¼ša-share-mcp-is-just-i-need

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
ä¸€ä¸ªåŸºäºFastMCPçš„Aè‚¡æ•°æ®æœåŠ¡MCPæœåŠ¡å™¨ï¼Œä¸ºé‡‘èåˆ†æç³»ç»Ÿæä¾›æ•°æ®æ¥å£ã€‚

### ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

#### 1. **è®¾è®¡æ¨¡å¼**
- **æ¥å£æŠ½è±¡**ï¼šä½¿ç”¨ `FinancialDataSource` æŠ½è±¡æ¥å£
- **ä¾èµ–æ³¨å…¥**ï¼šå¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„æ•°æ®æºå®ç°
- **å½“å‰å®ç°**ï¼š`BaostockDataSource`ï¼ˆåŸºäºbaostockåº“ï¼‰

#### 2. **æ ¸å¿ƒç»„ä»¶**

##### ğŸ“ ç›®å½•ç»“æ„
```
a-share-mcp-is-just-i-need/
â”œâ”€â”€ mcp_server.py              # MCPæœåŠ¡å™¨ä¸»å…¥å£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ data_source_interface.py    # æ•°æ®æºæŠ½è±¡æ¥å£
â”‚   â”œâ”€â”€ baostock_data_source.py    # Baostockæ•°æ®æºå®ç°
â”‚   â”œâ”€â”€ tools/                      # å·¥å…·æ³¨å†Œæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ stock_market.py         # è‚¡ç¥¨å¸‚åœºå·¥å…·
â”‚   â”‚   â”œâ”€â”€ financial_reports.py   # è´¢åŠ¡æŠ¥è¡¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ indices.py              # æŒ‡æ•°å·¥å…·
â”‚   â”‚   â”œâ”€â”€ market_overview.py     # å¸‚åœºæ¦‚è§ˆå·¥å…·
â”‚   â”‚   â”œâ”€â”€ macroeconomic.py       # å®è§‚ç»æµå·¥å…·
â”‚   â”‚   â”œâ”€â”€ analysis.py            # åˆ†æå·¥å…·
â”‚   â”‚   â”œâ”€â”€ news_crawler.py        # æ–°é—»çˆ¬è™«å·¥å…·
â”‚   â”‚   â””â”€â”€ date_utils.py          # æ—¥æœŸå·¥å…·
â”‚   â”œâ”€â”€ formatting/                 # æ ¼å¼åŒ–æ¨¡å—
â”‚   â”‚   â””â”€â”€ markdown_formatter.py  # Markdownæ ¼å¼åŒ–
â”‚   â””â”€â”€ utils.py                    # å·¥å…·å‡½æ•°
â””â”€â”€ test_baostock.py           # æµ‹è¯•æ–‡ä»¶
```

#### 3. **æä¾›çš„å·¥å…·ç±»åˆ«**

##### ğŸ“ˆ è‚¡ç¥¨å¸‚åœºå·¥å…· (`stock_market.py`)
- `get_historical_k_data` - è·å–å†å²Kçº¿æ•°æ®
- `get_stock_basic_info` - è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
- `get_trade_dates` - è·å–äº¤æ˜“æ—¥å†
- `get_all_stock` - è·å–æ‰€æœ‰è‚¡ç¥¨åˆ—è¡¨

##### ğŸ’° è´¢åŠ¡æŠ¥è¡¨å·¥å…· (`financial_reports.py`)
- `get_profit_data` - ç›ˆåˆ©èƒ½åŠ›æ•°æ®ï¼ˆå­£åº¦ï¼‰
- `get_operation_data` - è¿è¥èƒ½åŠ›æ•°æ®
- `get_growth_data` - æˆé•¿èƒ½åŠ›æ•°æ®
- `get_balance_data` - èµ„äº§è´Ÿå€ºè¡¨æ•°æ®
- `get_cash_flow_data` - ç°é‡‘æµé‡æ•°æ®
- `get_dupont_data` - æœé‚¦åˆ†ææ•°æ®

##### ğŸ“Š æŒ‡æ•°å·¥å…· (`indices.py`)
- `get_hs300_stocks` - æ²ªæ·±300æˆåˆ†è‚¡
- `get_sz50_stocks` - æ·±è¯50æˆåˆ†è‚¡
- `get_zz500_stocks` - ä¸­è¯500æˆåˆ†è‚¡
- `get_index_k_data` - æŒ‡æ•°Kçº¿æ•°æ®

##### ğŸ›ï¸ å¸‚åœºæ¦‚è§ˆå·¥å…· (`market_overview.py`)
- `get_market_overview` - å¸‚åœºæ•´ä½“æƒ…å†µ
- `get_sector_performance` - è¡Œä¸šè¡¨ç°
- `get_market_heat_map` - å¸‚åœºçƒ­åº¦å›¾

##### ğŸŒ å®è§‚ç»æµå·¥å…· (`macroeconomic.py`)
- `get_deposit_rate_data` - å­˜æ¬¾åˆ©ç‡æ•°æ®
- `get_loan_rate_data` - è´·æ¬¾åˆ©ç‡æ•°æ®
- `get_money_supply_data_month` - è´§å¸ä¾›åº”é‡ï¼ˆæœˆåº¦ï¼‰
- `get_cpi_data` - CPIæ•°æ®
- `get_gdp_data` - GDPæ•°æ®

##### ğŸ“° æ–°é—»çˆ¬è™«å·¥å…· (`news_crawler.py`)
- `search_stock_news` - æœç´¢è‚¡ç¥¨ç›¸å…³æ–°é—»
- `search_industry_news` - æœç´¢è¡Œä¸šæ–°é—»

##### ğŸ”§ åˆ†æå·¥å…· (`analysis.py`)
- `calculate_technical_indicators` - è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- `compare_with_industry` - è¡Œä¸šå¯¹æ¯”
- `analyze_financial_health` - è´¢åŠ¡å¥åº·åº¦åˆ†æ

##### ğŸ“… æ—¥æœŸå·¥å…· (`date_utils.py`)
- `get_latest_trading_date` - è·å–æœ€æ–°äº¤æ˜“æ—¥
- `get_market_analysis_timeframe` - è·å–åˆ†ææ—¶é—´èŒƒå›´

#### 4. **æ•°æ®æºå®ç°**

##### BaostockDataSource
- **æ•°æ®æ¥æº**ï¼šbaostockåº“ï¼ˆå…è´¹Aè‚¡æ•°æ®APIï¼‰
- **ç‰¹ç‚¹**ï¼š
  - è‡ªåŠ¨ç™»å½•/ç™»å‡ºç®¡ç†
  - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
  - æ•°æ®æ ¼å¼åŒ–ï¼ˆè½¬Markdownï¼‰
  - æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆKçº¿ã€è´¢åŠ¡ã€å®è§‚ç­‰ï¼‰

##### æ•°æ®æ¥å£æŠ½è±¡
```python
class FinancialDataSource(ABC):
    @abstractmethod
    def get_historical_k_data(...) -> pd.DataFrame
    @abstractmethod
    def get_stock_basic_info(...) -> pd.DataFrame
    # ... æ›´å¤šæ¥å£æ–¹æ³•
```
- ä¾¿äºæœªæ¥åˆ‡æ¢æ•°æ®æºï¼ˆå¦‚akshareã€tushareç­‰ï¼‰

#### 5. **å·¥å…·æ³¨å†Œæœºåˆ¶**

æ¯ä¸ªå·¥å…·æ¨¡å—éƒ½æœ‰ `register_*_tools()` å‡½æ•°ï¼š
```python
def register_stock_market_tools(app: FastMCP, active_data_source: FinancialDataSource):
    @app.tool()
    def get_historical_k_data(...):
        # ä½¿ç”¨ active_data_source è·å–æ•°æ®
        return safe_data_fetch(...)
```

åœ¨ä¸»æœåŠ¡å™¨ä¸­ç»Ÿä¸€æ³¨å†Œï¼š
```python
register_stock_market_tools(app, active_data_source)
register_financial_report_tools(app, active_data_source)
# ... å…¶ä»–å·¥å…·
```

#### 6. **é”™è¯¯å¤„ç†æœºåˆ¶**

æ‰€æœ‰å·¥å…·éƒ½é€šè¿‡ `safe_data_fetch()` å‡½æ•°åŒ…è£…ï¼š
- ç»Ÿä¸€æ•è·å¼‚å¸¸ï¼ˆ`NoDataFoundError`, `LoginError`, `DataSourceError`ç­‰ï¼‰
- è¿”å›å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- è®°å½•è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯

#### 7. **è¿è¡Œæ–¹å¼**

**ä½œä¸ºMCPæœåŠ¡å™¨è¿è¡Œ**ï¼š
```bash
cd a-share-mcp-is-just-i-need
uv run python mcp_server.py
```

**æµ‹è¯•æ•°æ®æº**ï¼š
```bash
python test_baostock.py
```

---

## ğŸ”„ ä¸¤ä¸ªå­é¡¹ç›®çš„åä½œæµç¨‹

### 1. **å¯åŠ¨æµç¨‹**
```
ç”¨æˆ·å¯åŠ¨ Financial-MCP-Agent
    â†“
ç³»ç»Ÿè¯»å– mcp_config.py é…ç½®
    â†“
å¯åŠ¨ a-share-mcp-is-just-i-need ä½œä¸ºå­è¿›ç¨‹ï¼ˆé€šè¿‡stdioï¼‰
    â†“
å»ºç«‹MCPè¿æ¥
```

### 2. **æ‰§è¡Œæµç¨‹**
```
ç”¨æˆ·è¾“å…¥ï¼š"åˆ†æè´µå·èŒ…å°(600519)"
    â†“
Financial-MCP-Agent æå–è‚¡ç¥¨ä¿¡æ¯
    â†“
å¹¶è¡Œå¯åŠ¨å››ä¸ªåˆ†ææ™ºèƒ½ä½“
    â†“
æ¯ä¸ªæ™ºèƒ½ä½“é€šè¿‡MCPå®¢æˆ·ç«¯è°ƒç”¨å·¥å…·ï¼š
  - Fundamental Agent â†’ get_profit_data(), get_balance_data()...
  - Technical Agent â†’ get_historical_k_data()...
  - Value Agent â†’ get_stock_basic_info()...
  - News Agent â†’ search_stock_news()...
    â†“
a-share-mcp-is-just-i-need å¤„ç†è¯·æ±‚
    â†“
è°ƒç”¨ BaostockDataSource è·å–æ•°æ®
    â†“
è¿”å›Markdownæ ¼å¼æ•°æ®ç»™æ™ºèƒ½ä½“
    â†“
æ™ºèƒ½ä½“ä½¿ç”¨LLMåˆ†ææ•°æ®
    â†“
Summary Agent æ•´åˆæ‰€æœ‰åˆ†æç»“æœ
    â†“
ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
```

### 3. **é€šä¿¡åè®®**
- **åè®®**ï¼šMCP (Model Context Protocol)
- **ä¼ è¾“æ–¹å¼**ï¼šstdioï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºï¼‰
- **æ•°æ®æ ¼å¼**ï¼šJSON-RPC over stdio

---

## ğŸ“š å…¶ä»–é¡¹ç›®æ–‡ä»¶è¯´æ˜

### `data_process.py`
- **åŠŸèƒ½**ï¼šæ–°é—»æ•°æ®å»é‡å¤„ç†
- **ç®—æ³•**ï¼š
  - æ ‡é¢˜ç›¸ä¼¼åº¦ï¼ˆç¼–è¾‘è·ç¦» + TF-IDFï¼‰
  - æ­£æ–‡é‡åˆåº¦ï¼ˆMinHashï¼‰
  - è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆSimHashï¼‰
- **ç”¨é€”**ï¼šå¤„ç†è®­ç»ƒæ•°æ®ï¼Œå»é™¤é‡å¤æ–°é—»

### `train_qwen_sentiment.py`
- **åŠŸèƒ½**ï¼šè®­ç»ƒQwenæ¨¡å‹è¿›è¡Œæƒ…æ„Ÿåˆ†æ
- **ç”¨é€”**ï¼šåˆ†ææ–°é—»æƒ…æ„Ÿï¼ˆæ­£é¢/è´Ÿé¢/ä¸­æ€§ï¼‰

### `train_qwen_risk.py`
- **åŠŸèƒ½**ï¼šè®­ç»ƒQwenæ¨¡å‹è¿›è¡Œé£é™©è¯„ä¼°
- **ç”¨é€”**ï¼šè¯„ä¼°æŠ•èµ„é£é™©ç­‰çº§

### `requirements.txt`
é¡¹ç›®ä¾èµ–åŒ…æ‹¬ï¼š
- `langgraph` - å·¥ä½œæµæ¡†æ¶
- `langchain-openai` - LLMé›†æˆ
- `baostock` - Aè‚¡æ•°æ®æº
- `langchain-mcp-adapters` - MCPåè®®é€‚é…å™¨
- `peft`, `transformers` - æ¨¡å‹å¾®è°ƒç›¸å…³

---

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

1. **å¤šæ™ºèƒ½ä½“å¹¶è¡Œæ¶æ„**ï¼šæé«˜åˆ†ææ•ˆç‡
2. **MCPåè®®è§£è€¦**ï¼šæ•°æ®æœåŠ¡å’Œåˆ†æç³»ç»Ÿåˆ†ç¦»
3. **è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šæ”¯æŒå¤šç§è¾“å…¥æ ¼å¼
4. **å®Œæ•´æ—¥å¿—ç³»ç»Ÿ**ï¼šä¾¿äºè°ƒè¯•å’Œå®¡è®¡
5. **å¯æ‰©å±•è®¾è®¡**ï¼šæ˜“äºæ·»åŠ æ–°çš„åˆ†æç»´åº¦æˆ–æ•°æ®æº
6. **ä¸­æ–‡é‡‘èåœºæ™¯ä¼˜åŒ–**ï¼šä¸“é—¨é’ˆå¯¹Aè‚¡å¸‚åœºè®¾è®¡

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡è¿è¡Œ**ï¼š
   - ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š`pip install -r requirements.txt`
   - é…ç½® `.env` æ–‡ä»¶ï¼ˆè®¾ç½®LLM APIå¯†é’¥å’ŒURLï¼‰
   - å…ˆæµ‹è¯•MCPæœåŠ¡å™¨æ˜¯å¦æ­£å¸¸ï¼š`cd a-share-mcp-is-just-i-need && uv run python mcp_server.py`

2. **æ—¥å¸¸ä½¿ç”¨**ï¼š
   - ä½¿ç”¨è‚¡ç¥¨ä»£ç èƒ½è·å¾—æ›´å‡†ç¡®çš„åˆ†æç»“æœ
   - å¯ä»¥åŒæ—¶æä¾›å…¬å¸åç§°å’Œè‚¡ç¥¨ä»£ç ï¼Œå¦‚ï¼š"åˆ†æè´µå·èŒ…å°(600519)"

3. **æŸ¥çœ‹ç»“æœ**ï¼š
   - åˆ†ææŠ¥å‘Šä¿å­˜åœ¨ `Financial-MCP-Agent/reports/` ç›®å½•
   - è¯¦ç»†æ—¥å¿—ä¿å­˜åœ¨ `Financial-MCP-Agent/logs/` ç›®å½•

---

## ğŸ” å…³é”®ä»£ç ä½ç½®

### Financial-MCP-Agent
- **å·¥ä½œæµå®šä¹‰**ï¼š`src/main.py` ç¬¬107-144è¡Œ
- **MCPé…ç½®**ï¼š`src/tools/mcp_config.py`
- **æ™ºèƒ½ä½“ç¤ºä¾‹**ï¼š`src/agents/fundamental_agent.py`
- **çŠ¶æ€å®šä¹‰**ï¼š`src/utils/state_definition.py`

### a-share-mcp-is-just-i-need
- **æœåŠ¡å™¨å…¥å£**ï¼š`mcp_server.py`
- **æ•°æ®æºå®ç°**ï¼š`src/baostock_data_source.py`
- **å·¥å…·ç¤ºä¾‹**ï¼š`src/tools/stock_market.py`
- **æ¥å£å®šä¹‰**ï¼š`src/data_source_interface.py`

---

## ğŸ“– æ€»ç»“

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„é‡‘èAIåˆ†æç³»ç»Ÿï¼š
- **Financial-MCP-Agent** è´Ÿè´£"åˆ†æ"å’Œ"å†³ç­–"
- **a-share-mcp-is-just-i-need** è´Ÿè´£"æ•°æ®æä¾›"
- ä¸¤è€…é€šè¿‡æ ‡å‡†MCPåè®®åä½œï¼Œå®ç°æ¨¡å—åŒ–å’Œå¯æ‰©å±•æ€§

é€šè¿‡å¤šæ™ºèƒ½ä½“æ¶æ„ï¼Œç³»ç»Ÿèƒ½å¤Ÿä»å¤šä¸ªç»´åº¦ï¼ˆåŸºæœ¬é¢ã€æŠ€æœ¯é¢ã€ä¼°å€¼ã€æ–°é—»ï¼‰å…¨é¢åˆ†æè‚¡ç¥¨ï¼Œå¹¶ç”Ÿæˆç»¼åˆæ€§çš„æŠ•èµ„åˆ†ææŠ¥å‘Šã€‚

